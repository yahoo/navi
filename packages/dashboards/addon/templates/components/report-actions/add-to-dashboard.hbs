{{!-- Copyright 2020, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
{{yield}}
<DenaliModal @isOpen={{this.showModal}} @onClose={{toggle "showModal" this}} 
  ...attributes as | modal |>
    <modal.Header class="navi-modal-header">
      <p class="primary-header">Add To Dashboard</p>
    </modal.Header>
    <modal.Content>
      <p class="secondary-header m-b-30">Please provide a name for this widget and select a dashboard</p>
      <DenaliInputGroup class="m-b-30" @label="Widget Title" as |Group|>
        <Group.Input 
          value={{this.reportName}}
          class="widget-title m-b-30"
          autofocus={{true}}
          {{on "input" (pipe (pick 'target.value') (fn (mut this.reportName)))}}
        />
      </DenaliInputGroup>
      {{#if this.shouldCreateDashboard}}
        <DenaliInputGroup class="m-b-30" @label="Dashboard" as |Group|>
          <Group.Input 
            class="add-to-dashboard__dashboard-title"
            @placeholder="Enter new dashboard name..."
            value={{this.newDashboardTitle}}
            autofocus={{true}}
            {{on "input" (pipe (pick 'target.value') (fn (mut this.newDashboardTitle) ) )}} />
        </DenaliInputGroup>
        <DenaliButton class="dashboard-action-text m-b-30 p-5" @style="solid" {{on "click" (toggle "shouldCreateDashboard" this)}}>Select from my dashboards</DenaliButton>
        <div class="btn-container">
          <DenaliButton class="add-to-dashboard m-5" @style="solid" {{on "click" (fn @onAddToNewDashboard this.newDashboardTitle this.reportName )}} disabled={{this.disableAdd}}>Add To Dashboard</DenaliButton>
          <DenaliButton class="m-5" @style="outline" {{on "click" (toggle "showModal" this)}}>Cancel</DenaliButton>
        </div>
      {{else}}
        <DenaliInputGroup @label="Dashboard" class="m-b-30">
          <PowerSelect
            class="dashboard-select m-b-30"
            @options={{this.groupedDashboards}}
            @placeholder="Select a dashboard..."
            @selected={{this.selectedDashboard}}
            @searchField="title"
            @searchPlaceholder="Search for a dashboard..."
            @onchange={{fn (mut this.selectedDashboard)}}
            @tagName="div"
            @renderInPlace={{true}}
            as |dashboard|
          >
            {{dashboard.title}}
          </PowerSelect>
        </DenaliInputGroup>
        <DenaliButton class="dashboard-action-text m-b-30 p-5" @style="solid" {{on "click" (toggle "shouldCreateDashboard" this)}}>Create new dashboard</DenaliButton>
        <div class="btn-container">
          <DenaliButton class="add-to-dashboard m-5" @style="solid" {{on "click" (fn @onAddToDashboard this.selectedDashboard.id this.reportName)}} disabled={{this.disableAdd}}>Add To Dashboard</DenaliButton>
          <DenaliButton class="m-5" @style="outline" {{on "click" (toggle "showModal" this)}}>Cancel</DenaliButton>
        </div>
      {{/if}}
    </modal.Content>
</DenaliModal>
