{{!-- Copyright 2019, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
<NaviListSelector
  @items={{this.listItems}}
  @searchField="longName"
  @selected={{this.selectedColumnsAndFilters}}
  @title="Dimensions"
  as | items areItemsFiltered |
>
  <GroupedList
    @items={{items}}
    @shouldOpenAllGroups={{areItemsFiltered}}
    @groupByField="category"
    @sortByField={{unless areItemsFiltered "longName"}}
    as | item |
  >
    {{#if (eq item.category "Time Grain")}}
      <div class="grouped-list__item-checkbox-container">
        <input
          type="checkbox"
          class="grouped-list__item-checkbox"
          id={{concat "grouped-list-checkbox-" (dasherize item.longName)}}
          onchange={{action "itemClicked" item}}
          checked={{get itemsChecked item.name}}>
        <label for={{concat "grouped-list-checkbox-" (dasherize item.longName)}}
          class="grouped-list__item-checkbox-label">
          {{item.longName}}
        </label>
      </div>
    {{else}}
      <div class="grouped-list__item-container {{if (and (get itemsChecked item.name) enableRequestPreview) "grouped-list__item-container--selected"}}">
        <NaviIcon
          @icon={{if (and (get itemsChecked item.name) (not enableRequestPreview)) "minus-circle" "plus-circle"}}
          class="grouped-list__add-icon {{if (not (or enableRequestPreview (get itemsChecked item.name))) "grouped-list__add-icon--deselected"}}"
          onclick={{action "itemClicked" item}} />
        {{item.longName}}

        <NaviIcon @icon="question-circle-o" class="grouped-list__item-info">
          <EmberTooltip @side="right" @popperContainer="body" @effect="none">
            {{#if item.extended.isPending}}
              {{navi-loading-message}}
            {{else}}
              {{or item.extended.content.description "No description available"}}
            {{/if}}
          </EmberTooltip>
        </NaviIcon>

        <div class="grouped-list__icon-set">
          <a role="button"
            class={{concat (if (get dimensionsFiltered item.name) "grouped-list__filter--active ") "grouped-list__filter"}}
            onclick={{action onToggleDimFilter item}}>
            <span class="grouped-list__filter--icon"></span>
          </a>
        </div>
      </div>
    {{/if}}
  </GroupedList>
</NaviListSelector>
