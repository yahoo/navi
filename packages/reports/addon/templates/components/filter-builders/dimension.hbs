{{!-- Copyright 2021, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
{{#if @isCollapsed}}
  <span class="filter-builder" ...attributes>
    <FilterBuilders::Collapsed
      @displayName={{this.displayName}}
      @filter={{this.filter}}
      @request={{@request}}
      @field={{this.field}}
    />
  </span>
{{else}}
  <div class="filter-builder" ...attributes>
    <span class="filter-builder-dimension__subject">
      {{this.displayName}}
    </span>
    <div class="filter-builder-dimension__operator">
      <span>
        <PowerSelect
          @dropdownClass="filter-builder-dimension__operator-dropdown"
          @options={{this.supportedOperators}}
          @selected={{this.filter.operator}}
          @searchEnabled={{false}}
          @triggerClass="filter-builder-dimension__select-trigger"
          @onChange={{this.setOperator}}
          as | operator |
        >
          {{operator.name}}
        </PowerSelect>
      </span>
    </div>
    {{#if this.showFields}}
      <span class="filter-builder-dimension__field">
        <PowerSelect
          @searchEnabled={{false}}
          @options={{this.fields}}
          @selected={{this.filter.field}}
          @dropdownClass="filter-builder-dimension__field-dropdown"
          @triggerClass="filter-builder-dimension__select-trigger"
          @matchTriggerWidth={{false}}
          @onChange={{this.setField}}
          as | filterField |
        >
          {{filterField}}
        </PowerSelect>
      </span>
    {{/if}}
    <span class="filter-builder-dimension__values {{if this.showFields "filter-builder-dimension__values--short"}}">
      {{component
        this.filter.operator.valuesComponent
        filter=this.filter
        request=@request
        onUpdateFilter=@onUpdateFilter
      }}
    </span>
  </div>
{{/if}}