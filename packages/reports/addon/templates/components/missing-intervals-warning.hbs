{{!-- Copyright 2020, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
<AnimatedContainer class="missing-intervals-warning" @motion={{this.resizeMotion}}>
  {{#animated-if this.warningEnabled initialInsertion=true use=this.drawerTransition}}
    <div class="missing-intervals-warning__contents" role="button" {{on "click" (toggle "showDetails" this)}} ...attributes>
      <NaviIcon @icon="exclamation-triangle" class="missing-intervals-warning__warning-icon" />
      <span class="missing-intervals-warning__message-text">Results have missing data.</span>
      <span class="missing-intervals-warning__details-trigger">
        {{#animated-if this.showDetails use=this.fadeTransition}}
          <span class="missing-intervals-warning__details-desc">Click to close.</span>
          <NaviIcon @icon="chevron-down" class="missing-intervals-warning__arrow-icon" />
        {{else}}
          <span class="missing-intervals-warning__details-desc">Click for more details.</span>
          <NaviIcon @icon="chevron-up" class="missing-intervals-warning__arrow-icon" />
        {{/animated-if}}
      </span>
    </div>
    {{#if this.showDetails}}
      <div class="missing-intervals-warning__details-content">
        <div class="missing-intervals-warning__details-help-text">The following intervals from the result set have missing data:</div>
        <div class="missing-intervals-warning__dates">
          {{#each this.missingIntervals as |interval|}}
            <div class="missing-intervals-warning__date-row">
              <NaviIcon @icon="times" class="missing-intervals-warning__x-icon" />
              <span class="missing-intervals-warning__date-interval">{{interval}}</span>
            </div>
          {{/each}}
        </div>
        <div class="missing-intervals-warning__disclaimer">Note: Listed intervals include both the start and end dates.</div>
      </div>
    {{/if}}
  {{/animated-if}}
</AnimatedContainer>
